import{E as se,M as I,V as h,a as Q,b as f,Q as ae,d as ce,o as re,c as pe,P as de,S as le,C as me,G as ue,e as he,f as fe,p as ye,g as ge,h as W,_ as Ee}from"./index-BlTId-Lj.js";const Z={type:"change"},R={type:"start"},Y={type:"end"};class be extends se{constructor(g,v){super();const e=this,n={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=g,this.domElement=v,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:I.ROTATE,MIDDLE:I.DOLLY,RIGHT:I.PAN},this.target=new h;const j=1e-6,O=new h;let _=1,r=n.NONE,d=n.NONE,m=0,E=0,k=0;const c=new h,p=new f,s=new f,P=new h,u=new f,T=new f,b=new f,x=new f,i=[],N={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const t=e.domElement.getBoundingClientRect(),o=e.domElement.ownerDocument.documentElement;e.screen.left=t.left+window.pageXOffset-o.clientLeft,e.screen.top=t.top+window.pageYOffset-o.clientTop,e.screen.width=t.width,e.screen.height=t.height};const C=function(){const t=new f;return function(a,l){return t.set((a-e.screen.left)/e.screen.width,(l-e.screen.top)/e.screen.height),t}}(),M=function(){const t=new f;return function(a,l){return t.set((a-e.screen.width*.5-e.screen.left)/(e.screen.width*.5),(e.screen.height+2*(e.screen.top-l))/e.screen.width),t}}();this.rotateCamera=function(){const t=new h,o=new ae,a=new h,l=new h,y=new h,w=new h;return function(){w.set(s.x-p.x,s.y-p.y,0);let A=w.length();A?(c.copy(e.object.position).sub(e.target),a.copy(c).normalize(),l.copy(e.object.up).normalize(),y.crossVectors(l,a).normalize(),l.setLength(s.y-p.y),y.setLength(s.x-p.x),w.copy(l.add(y)),t.crossVectors(w,c).normalize(),A*=e.rotateSpeed,o.setFromAxisAngle(t,A),c.applyQuaternion(o),e.object.up.applyQuaternion(o),P.copy(t),k=A):!e.staticMoving&&k&&(k*=Math.sqrt(1-e.dynamicDampingFactor),c.copy(e.object.position).sub(e.target),o.setFromAxisAngle(P,k),c.applyQuaternion(o),e.object.up.applyQuaternion(o)),p.copy(s)}}(),this.zoomCamera=function(){let t;r===n.TOUCH_ZOOM_PAN?(t=m/E,m=E,e.object.isPerspectiveCamera?c.multiplyScalar(t):e.object.isOrthographicCamera?(e.object.zoom=Q.clamp(e.object.zoom/t,e.minZoom,e.maxZoom),_!==e.object.zoom&&e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(t=1+(T.y-u.y)*e.zoomSpeed,t!==1&&t>0&&(e.object.isPerspectiveCamera?c.multiplyScalar(t):e.object.isOrthographicCamera?(e.object.zoom=Q.clamp(e.object.zoom/t,e.minZoom,e.maxZoom),_!==e.object.zoom&&e.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),e.staticMoving?u.copy(T):u.y+=(T.y-u.y)*this.dynamicDampingFactor)},this.panCamera=function(){const t=new f,o=new h,a=new h;return function(){if(t.copy(x).sub(b),t.lengthSq()){if(e.object.isOrthographicCamera){const y=(e.object.right-e.object.left)/e.object.zoom/e.domElement.clientWidth,w=(e.object.top-e.object.bottom)/e.object.zoom/e.domElement.clientWidth;t.x*=y,t.y*=w}t.multiplyScalar(c.length()*e.panSpeed),a.copy(c).cross(e.object.up).setLength(t.x),a.add(o.copy(e.object.up).setLength(t.y)),e.object.position.add(a),e.target.add(a),e.staticMoving?b.copy(x):b.add(t.subVectors(x,b).multiplyScalar(e.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!e.noZoom||!e.noPan)&&(c.lengthSq()>e.maxDistance*e.maxDistance&&(e.object.position.addVectors(e.target,c.setLength(e.maxDistance)),u.copy(T)),c.lengthSq()<e.minDistance*e.minDistance&&(e.object.position.addVectors(e.target,c.setLength(e.minDistance)),u.copy(T)))},this.update=function(){c.subVectors(e.object.position,e.target),e.noRotate||e.rotateCamera(),e.noZoom||e.zoomCamera(),e.noPan||e.panCamera(),e.object.position.addVectors(e.target,c),e.object.isPerspectiveCamera?(e.checkDistances(),e.object.lookAt(e.target),O.distanceToSquared(e.object.position)>j&&(e.dispatchEvent(Z),O.copy(e.object.position))):e.object.isOrthographicCamera?(e.object.lookAt(e.target),(O.distanceToSquared(e.object.position)>j||_!==e.object.zoom)&&(e.dispatchEvent(Z),O.copy(e.object.position),_=e.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){r=n.NONE,d=n.NONE,e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.up.copy(e.up0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),c.subVectors(e.object.position,e.target),e.object.lookAt(e.target),e.dispatchEvent(Z),O.copy(e.object.position),_=e.object.zoom};function X(t){e.enabled!==!1&&(i.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",D),e.domElement.addEventListener("pointerup",z)),ne(t),t.pointerType==="touch"?ee(t):K(t))}function D(t){e.enabled!==!1&&(t.pointerType==="touch"?te(t):J(t))}function z(t){e.enabled!==!1&&(t.pointerType==="touch"?oe(t):$(),B(t),i.length===0&&(e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",D),e.domElement.removeEventListener("pointerup",z)))}function H(t){B(t)}function L(t){e.enabled!==!1&&(window.removeEventListener("keydown",L),d===n.NONE&&(t.code===e.keys[n.ROTATE]&&!e.noRotate?d=n.ROTATE:t.code===e.keys[n.ZOOM]&&!e.noZoom?d=n.ZOOM:t.code===e.keys[n.PAN]&&!e.noPan&&(d=n.PAN)))}function U(){e.enabled!==!1&&(d=n.NONE,window.addEventListener("keydown",L))}function K(t){if(r===n.NONE)switch(t.button){case e.mouseButtons.LEFT:r=n.ROTATE;break;case e.mouseButtons.MIDDLE:r=n.ZOOM;break;case e.mouseButtons.RIGHT:r=n.PAN;break}const o=d!==n.NONE?d:r;o===n.ROTATE&&!e.noRotate?(s.copy(M(t.pageX,t.pageY)),p.copy(s)):o===n.ZOOM&&!e.noZoom?(u.copy(C(t.pageX,t.pageY)),T.copy(u)):o===n.PAN&&!e.noPan&&(b.copy(C(t.pageX,t.pageY)),x.copy(b)),e.dispatchEvent(R)}function J(t){const o=d!==n.NONE?d:r;o===n.ROTATE&&!e.noRotate?(p.copy(s),s.copy(M(t.pageX,t.pageY))):o===n.ZOOM&&!e.noZoom?T.copy(C(t.pageX,t.pageY)):o===n.PAN&&!e.noPan&&x.copy(C(t.pageX,t.pageY))}function $(){r=n.NONE,e.dispatchEvent(Y)}function V(t){if(e.enabled!==!1&&e.noZoom!==!0){switch(t.preventDefault(),t.deltaMode){case 2:u.y-=t.deltaY*.025;break;case 1:u.y-=t.deltaY*.01;break;default:u.y-=t.deltaY*25e-5;break}e.dispatchEvent(R),e.dispatchEvent(Y)}}function ee(t){switch(F(t),i.length){case 1:r=n.TOUCH_ROTATE,s.copy(M(i[0].pageX,i[0].pageY)),p.copy(s);break;default:r=n.TOUCH_ZOOM_PAN;const o=i[0].pageX-i[1].pageX,a=i[0].pageY-i[1].pageY;E=m=Math.sqrt(o*o+a*a);const l=(i[0].pageX+i[1].pageX)/2,y=(i[0].pageY+i[1].pageY)/2;b.copy(C(l,y)),x.copy(b);break}e.dispatchEvent(R)}function te(t){switch(F(t),i.length){case 1:p.copy(s),s.copy(M(t.pageX,t.pageY));break;default:const o=ie(t),a=t.pageX-o.x,l=t.pageY-o.y;E=Math.sqrt(a*a+l*l);const y=(t.pageX+o.x)/2,w=(t.pageY+o.y)/2;x.copy(C(y,w));break}}function oe(t){switch(i.length){case 0:r=n.NONE;break;case 1:r=n.TOUCH_ROTATE,s.copy(M(t.pageX,t.pageY)),p.copy(s);break;case 2:r=n.TOUCH_ZOOM_PAN;for(let o=0;o<i.length;o++)if(i[o].pointerId!==t.pointerId){const a=N[i[o].pointerId];s.copy(M(a.x,a.y)),p.copy(s);break}break}e.dispatchEvent(Y)}function q(t){e.enabled!==!1&&t.preventDefault()}function ne(t){i.push(t)}function B(t){delete N[t.pointerId];for(let o=0;o<i.length;o++)if(i[o].pointerId==t.pointerId){i.splice(o,1);return}}function F(t){let o=N[t.pointerId];o===void 0&&(o=new f,N[t.pointerId]=o),o.set(t.pageX,t.pageY)}function ie(t){const o=t.pointerId===i[0].pointerId?i[1]:i[0];return N[o.pointerId]}this.dispose=function(){e.domElement.removeEventListener("contextmenu",q),e.domElement.removeEventListener("pointerdown",X),e.domElement.removeEventListener("pointercancel",H),e.domElement.removeEventListener("wheel",V),e.domElement.removeEventListener("pointermove",D),e.domElement.removeEventListener("pointerup",z),window.removeEventListener("keydown",L),window.removeEventListener("keyup",U)},this.domElement.addEventListener("contextmenu",q),this.domElement.addEventListener("pointerdown",X),this.domElement.addEventListener("pointercancel",H),this.domElement.addEventListener("wheel",V,{passive:!1}),window.addEventListener("keydown",L),window.addEventListener("keyup",U),this.handleResize(),this.update()}}const G=S=>(ye("data-v-f06eefc0"),S=S(),ge(),S),we={class:"test"},je=G(()=>W("div",{style:{border:"1px red solid"},id:"container"},null,-1)),Oe=G(()=>W("div",{style:{border:"1px greenyellow solid"},id:"blocker"},null,-1)),_e=[je,Oe],Te=ce({__name:"TestView",setup(S){let g,v,e,n;function j(d,m,E,k,c){const p=document.createElement("div");p.style.width="480px",p.style.height="360px",p.style.backgroundColor="#000";const s=document.createElement("iframe");s.style.width="480px",s.style.height="360px",s.style.border="0px",s.src=["https://www.youtube.com/embed/",d,"?rel=0"].join(""),p.appendChild(s);const P=new fe(p);return P.position.set(m,E,k),P.rotation.y=c,P}function O(){const d=document.getElementById("container");g=new de(50,window.innerWidth/window.innerHeight,1,5e3),g.position.set(500,350,750),v=new le,e=new me,e.setSize(window.innerWidth,window.innerHeight),d.appendChild(e.domElement);const m=new ue;m.add(j("SJOz3qjfQXU",0,0,240,0)),m.add(j("Y2-xZ-1HE-Q",240,0,0,Math.PI/2)),m.add(j("IrydklNpcFI",0,0,-240,Math.PI)),m.add(j("9ubytEsCaS0",-240,0,0,-Math.PI/2)),v.add(m),n=new be(g,e.domElement),n.rotateSpeed=4,window.addEventListener("resize",_);const E=document.getElementById("blocker");E.style.display="none",n.addEventListener("start",function(){}),n.addEventListener("end",function(){})}function _(){g.aspect=window.innerWidth/window.innerHeight,g.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)}function r(){requestAnimationFrame(r),n.update(),e.render(v,g)}return re(()=>{O(),r()}),(d,m)=>(he(),pe("div",we,_e))}}),Pe=Ee(Te,[["__scopeId","data-v-f06eefc0"]]);export{Pe as default};
